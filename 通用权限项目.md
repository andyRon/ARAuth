é€šç”¨æƒé™é¡¹ç›®
-----

https://www.bilibili.com/video/BV1ad4y1y7LU


## ä»‹ç»

### é¡¹ç›®èƒŒæ™¯

### å‰ç½®çŸ¥è¯†



## ä¸€ã€é¡¹ç›®ä»‹ç»

æƒé™ç®¡ç†æ˜¯æ‰€æœ‰åå°ç³»ç»Ÿéƒ½ä¼šæ¶‰åŠçš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ï¼Œè€Œæƒé™ç®¡ç†çš„æ ¸å¿ƒæµç¨‹æ˜¯ç›¸ä¼¼çš„ï¼Œå¦‚æœæ¯ä¸ªåå°å•ç‹¬å¼€å‘ä¸€å¥—æƒé™ç®¡ç†ç³»ç»Ÿï¼Œå°±æ˜¯é‡å¤é€ è½®å­ï¼Œæ˜¯äººåŠ›çš„æå¤§æµªè´¹ï¼Œæœ¬é¡¹ç›®å°±æ˜¯é’ˆå¯¹è¿™ä¸ªé—®é¢˜ï¼Œæä¾›äº†ä¸€å¥—é€šç”¨çš„æƒé™è§£å†³æ–¹æ¡ˆã€‚

ç”¨æˆ·ç®¡ç†

è§’è‰²ç®¡ç†

èœå•ç®¡ç†

éƒ¨é—¨ç®¡ç†

å²—ä½ç®¡ç†

æ—¥å¿—ç®¡ç†

| åŸºç¡€æ¡†æ¶ï¼šSpringBoot                              |
| ------------------------------------------------- |
| æ•°æ®ç¼“å­˜ï¼šRedis                                   |
| æ•°æ®åº“ï¼šMysql                                     |
| æƒé™æ§åˆ¶ï¼šSpringSecurity                          |
| å…¨å±€æ—¥å¿—è®°å½•ï¼šAOP                                 |
| å‰ç«¯æ¨¡æ¿ï¼švue-admin-template                      |
| å‰ç«¯æŠ€æœ¯ï¼šNode.js + Npm + Vue + ElementUI + Axios |

### é¡¹ç›®æ¨¡å—

```
arauth-parentï¼šæ ¹ç›®å½•ï¼Œç®¡ç†å­æ¨¡å—ï¼š  # çˆ¶å·¥ç¨‹ pomç±»å‹ã€‚ä¾èµ–ç®¡ç†

    commonï¼šå…¬å…±ç±»çˆ¶æ¨¡å—

        common-logï¼šç³»ç»Ÿæ“ä½œæ—¥å¿—æ¨¡å—

        common-utilï¼šæ ¸å¿ƒå·¥å…·ç±»

        service-utilï¼šserviceæ¨¡å—å·¥å…·ç±»

        spring-securityï¼šspring-securityä¸šåŠ¡æ¨¡å—

    modelï¼šå®ä½“ç±»æ¨¡å—

    service-systemï¼šç³»ç»Ÿæƒé™æ¨¡å—
```



### æ•°æ®åº“è®¾è®¡

![](images/image-20230322010519208.png)

## äºŒã€æ­å»ºç¯å¢ƒ

### æ­å»ºå„ä¸ªæ¨¡å—



## Mybatis-Plus

![](images/image-20230326114412642.png)

![](images/image-20230326114444831.png)

1. å‡†å¤‡
   - springbooté…ç½®æ–‡ä»¶
   - å¯åŠ¨ç±»
   - å®ä½“ç±»
2. åˆ›å»ºmapper
   - mpå®ç°curdæ“ä½œ
     - åˆ›å»ºmapperçš„interface
     - mapperç»§æ‰¿BaseMapper<å®ä½“ç±»>
     - è°ƒç”¨mapperå°è£…çš„å®ç°å®ç°curdæ“ä½œ

3. åˆ›å»ºservice
   - åˆ›å»ºserviceæ¥å£ç»§æ‰¿IService
   - åˆ›å»ºserviceå®ç°ç±»ï¼Œç»§æ‰¿ServiceImpl



![](images/image-20230326114656897.png)



### MPæ¡ä»¶æ„é€ å™¨

![](images/image-20230326154316164.png)

Wrapper ï¼š æ¡ä»¶æ„é€ æŠ½è±¡ç±»ï¼Œæœ€é¡¶ç«¯çˆ¶ç±»

  AbstractWrapper ï¼š ç”¨äºæŸ¥è¯¢æ¡ä»¶å°è£…ï¼Œç”Ÿæˆ sql çš„ where æ¡ä»¶

â€‹    QueryWrapper ï¼š Entity å¯¹è±¡å°è£…æ“ä½œç±»ï¼Œä¸æ˜¯ç”¨lambdaè¯­æ³•

â€‹    UpdateWrapper ï¼š Update æ¡ä»¶å°è£…ï¼Œç”¨äºEntityå¯¹è±¡æ›´æ–°æ“ä½œ

  AbstractLambdaWrapper ï¼š Lambda è¯­æ³•ä½¿ç”¨ Wrapperç»Ÿä¸€å¤„ç†è§£æ lambda è·å– columnã€‚

â€‹    LambdaQueryWrapper ï¼šçœ‹åç§°ä¹Ÿèƒ½æ˜ç™½å°±æ˜¯ç”¨äºLambdaè¯­æ³•ä½¿ç”¨çš„æŸ¥è¯¢Wrapper

â€‹    LambdaUpdateWrapper ï¼š Lambda æ›´æ–°å°è£…Wrapper



### MPå°è£…serviceå±‚

MPä¹Ÿæ›¿æˆ‘ä»¬ï¼ŒæŠŠServiceè°ƒç”¨mapperè¿‡ç¨‹ å°è£…äº†

```java
@Service
public class SysRoleServiceImpl extends ServiceImpl<SysRoleMapper, SysRole> implements SysRoleService {
}

```

```java
public class ServiceImpl<M extends BaseMapper<T>, T> implements IService<T> {
    protected Log log = LogFactory.getLog(this.getClass());
    @Autowired
    protected M baseMapper;
```



> ![](images/image-20230326161220654.png)

## è§’è‰²ç®¡ç†

### controller

### æ•´åˆSwagger2

[knife4j](https://doc.xiaominfo.com/)æ˜¯ä¸ºJava MVCæ¡†æ¶é›†æˆSwaggerç”ŸæˆApiæ–‡æ¡£çš„å¢å¼ºè§£å†³æ–¹æ¡ˆã€‚

knife4jå±äºserviceæ¨¡å—å…¬å…±èµ„æºï¼Œå› æ­¤æˆ‘ä»¬é›†æˆåˆ°service-uitlæ¨¡å—



```xml
<dependency>
    <groupId>com.github.xiaoymin</groupId>
    <artifactId>knife4j-spring-boot-starter</artifactId>
</dependency>
```



knife4jæµ‹è¯•è·¯å¾„ http://localhost:8800/doc.html

### å®šä¹‰ç»Ÿä¸€è¿”å›ç»“æœå¯¹è±¡

common-utilæ¨¡å—



### æ¡ä»¶åˆ†é¡µæŸ¥è¯¢

1. é…ç½®åˆ†é¡µæ’ä»¶ï¼Œé€šè¿‡é…ç½®ç±»å®ç°



2. åˆ›å»ºcontrolleræ–¹æ³•

```java
    @ApiOperation(value = "æ¡ä»¶åˆ†é¡µæŸ¥è¯¢")
    @GetMapping("/{page}/{limit}")
    public Result findPageQueryRole(
            @ApiParam(name = "page", value = "å½“å‰é¡µç ", required = true)
            @PathVariable Long page,
            @ApiParam(name = "limit", value = "æ¯é¡µè®°å½•æ•°", required = true)
            @PathVariable Long limit,
            @ApiParam(name = "roleQueryVo", value = "æŸ¥è¯¢å¯¹è±¡", required = false)
            SysRoleQueryVo sysRoleQueryVo) {

        Page<SysRole> pageParam = new Page<>(page, limit);
        IPage<SysRole> pageModel = sysRoleService.selectPage(pageParam, sysRoleQueryVo);
        return Result.ok(pageModel);
    }
```



3. Serviceæ–¹æ³•

```java
    IPage<SysRole> selectPage(Page<SysRole> pageParam, SysRoleQueryVo sysRoleQueryVo);
```

```java
    @Override
    public IPage<SysRole> selectPage(Page<SysRole> pageParam, SysRoleQueryVo sysRoleQueryVo) {
        IPage<SysRole> pageModel = baseMapper.selectPage(pageParam, sysRoleQueryVo);
        return pageModel;
    }
```



4. mapperæ–¹æ³•

```java
    IPage<SysRole> selectPage(Page<SysRole> pageParam, @Param("vo") SysRoleQueryVo sysRoleQueryVo);

```



3. åˆ›å»ºmapperçš„xmlé…ç½®æ–‡ä»¶ï¼Œç¼–å†™sqlè¯­å¥å®ç°

åœ¨resourcesç›®å½•ä¸‹åˆ›å»ºmapper/SysRoleMapper.xmlæ–‡ä»¶

è¯´æ˜ï¼šåˆ†é¡µæˆ‘ä»¬ç»Ÿä¸€å®šä¹‰åˆ°xmlæ–‡ä»¶ä¸­ï¼Œæ›´æ–¹ä¾¿ç›´è§‚

```xml
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.andyron.system.mapper.SysRoleMapper">

    <resultMap id="RoleMap" type="com.andyron.model.system.SysRole" autoMapping="true">
    </resultMap>


    <select id="selectPage" resultMap="RoleMap">
        select <include refid="columns" />
        from sys_role
        <where>
            <if test="vo.roleName != null and vo.roleName != ''">
                and role_name like CONCAT('%',#{vo.roleName},'%')
            </if>
            and is_deleted = 0
        </where>
        order by id desc
    </select>

</mapper>
```





### ç»Ÿä¸€å¼‚å¸¸å¤„ç†

service-util



#### å…¨å±€å¼‚å¸¸å¤„ç†



#### ç‰¹å®šå¼‚å¸¸å¤„ç†



#### è‡ªå®šä¹‰å¼‚å¸¸å¤„ç†



## å‰ç«¯åŸºç¡€çŸ¥è¯†



### VS Code

å¿«æ·é”®

```
!
å³å‡»æœåŠ¡å™¨æ‰“å¼€
```



### Node.js

å®˜ç½‘ï¼šhttps://nodejs.org/en/ 

ä¸­æ–‡ç½‘ï¼šhttp://nodejs.cn/ 

LTSï¼šé•¿æœŸæ”¯æŒç‰ˆæœ¬

Currentï¼šæœ€æ–°ç‰ˆ



æµè§ˆå™¨çš„å†…æ ¸åŒ…æ‹¬ä¸¤éƒ¨åˆ†æ ¸å¿ƒï¼š

- DOMæ¸²æŸ“å¼•æ“ï¼›
- jsè§£æå™¨ï¼ˆjså¼•æ“ï¼‰

jsè¿è¡Œåœ¨æµè§ˆå™¨ä¸­çš„å†…æ ¸ä¸­çš„jså¼•æ“å†…éƒ¨

Node.jsæ˜¯è„±ç¦»æµè§ˆå™¨ç¯å¢ƒè¿è¡Œçš„JavaScriptç¨‹åºï¼ŒåŸºäºV8 å¼•æ“ï¼ˆChrome çš„ JavaScriptçš„å¼•æ“ï¼‰



### NPM



```shell
npm init
npm init -y

# è®¾ç½®é•œåƒ
#ç»è¿‡ä¸‹é¢çš„é…ç½®ï¼Œä»¥åæ‰€æœ‰çš„ npm install éƒ½ä¼šç»è¿‡æ·˜å®çš„é•œåƒåœ°å€ä¸‹è½½
npm config set registry https://registry.npm.taobao.org 
#æŸ¥çœ‹npmé…ç½®ä¿¡æ¯
npm config list

npm install [åŒ…å]/[åŒ…å@2.2.x]
npm install 		# æ ¹æ®å½“å‰ç›®å½•ä¸‹é…ç½®æ–‡ä»¶package.jsonå®‰è£…
npm intall -g     # å…¨å±€å®‰è£…
#devDependenciesèŠ‚ç‚¹ï¼šå¼€å‘æ—¶çš„ä¾èµ–åŒ…ï¼Œé¡¹ç›®æ‰“åŒ…åˆ°ç”Ÿäº§ç¯å¢ƒçš„æ—¶å€™ä¸åŒ…å«çš„ä¾èµ–
#ä½¿ç”¨ -Då‚æ•°å°†ä¾èµ–æ·»åŠ åˆ°devDependenciesèŠ‚ç‚¹
npm install --save-dev eslint
#æˆ–
npm install -D eslint

#æ›´æ–°åŒ…ï¼ˆæ›´æ–°åˆ°æœ€æ–°ç‰ˆæœ¬ï¼‰
npm update åŒ…å
#å…¨å±€æ›´æ–°
npm update -g åŒ…å
#å¸è½½åŒ…
npm uninstall åŒ…å
#å…¨å±€å¸è½½
npm uninstall -g åŒ…å

```

ä¾‹å¦‚`package.json`ä¸­çš„`^3.6.4`ï¼Œä¼šè‡ªåŠ¨æ›´æ–°æœ€æ–°çš„å°ç‰ˆæœ¬ï¼Œè€Œ`package-lock.json`è¡¨ç¤ºé”å®šå½“å‰ä¾èµ–ç‰ˆæœ¬`3.6.4`ã€‚

### æ¨¡å—åŒ–å¼€å‘ï¼ˆES5ï¼‰



### æ¨¡å—åŒ–å¼€å‘ï¼ˆES6ï¼‰



#### å®‰è£…Babel

```
npm install -g babel-cli
babel --version
```

#### é…ç½®.babelrc

Babelçš„é…ç½®æ–‡ä»¶æ˜¯.babelrcï¼Œå­˜æ”¾åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹ï¼Œè¯¥æ–‡ä»¶ç”¨æ¥è®¾ç½®è½¬ç è§„åˆ™å’Œæ’ä»¶ï¼Œpresetså­—æ®µè®¾å®šè½¬ç è§„åˆ™ï¼Œå°†es2015è§„åˆ™åŠ å…¥ .babelrcï¼š

```
{
    "presets": ["es2015"],
    "plugins": []
}
```

#### å®‰è£…è½¬ç å™¨

```
npm install --save-dev babel-preset-es2015
```

#### è½¬ç 

```shell
# æ•´ä¸ªç›®å½•è½¬ç 
mkdir dist1
# --out-dir æˆ– -d å‚æ•°æŒ‡å®šè¾“å‡ºç›®å½•
babel src -d dist1
```

#### è¿è¡Œç¨‹åº 

```shell
node dist1/userComponent.js
```

### 



## å‰ç«¯æ¡†æ¶

### vue-element-admin

vue-element-adminæ˜¯åŸºäºVueå’ŒElement-ui çš„ä¸€å¥—åå°ç®¡ç†ç³»ç»Ÿé›†æˆæ–¹æ¡ˆã€‚

**åŠŸèƒ½ï¼š**https://panjiachen.github.io/vue-element-admin-site/zh/guide/

**GitHubåœ°å€ï¼š**https://github.com/PanJiaChen/vue-element-admin

### Element-ui

element-ui æ˜¯é¥¿äº†ä¹ˆå‰ç«¯å‡ºå“çš„åŸºäº Vue.jsçš„ åå°ç»„ä»¶åº“ï¼Œæ–¹ä¾¿ç¨‹åºå‘˜è¿›è¡Œé¡µé¢å¿«é€Ÿå¸ƒå±€å’Œæ„å»º

å®˜ç½‘ï¼š https://element.eleme.cn/#/zh-CN

### vue-admin-template

vue-admin-templateæ˜¯åŸºäºvue-element-adminçš„ä¸€å¥—åå°ç®¡ç†ç³»ç»ŸåŸºç¡€æ¨¡æ¿ï¼ˆ**æœ€å°‘ç²¾ç®€ç‰ˆ**ï¼‰ï¼Œå¯ä½œä¸ºæ¨¡æ¿è¿›è¡ŒäºŒæ¬¡å¼€å‘ã€‚

**GitHubåœ°å€ï¼š**https://github.com/PanJiaChen/vue-admin-template

**å»ºè®®ï¼š**ä½ å¯ä»¥åœ¨ `vue-admin-template` çš„åŸºç¡€ä¸Šè¿›è¡ŒäºŒæ¬¡å¼€å‘ï¼ŒæŠŠ `vue-element-admin`å½“åšå·¥å…·ç®±ï¼Œæƒ³è¦ä»€ä¹ˆåŠŸèƒ½æˆ–è€…ç»„ä»¶å°±å» `vue-element-admin` é‚£é‡Œå¤åˆ¶è¿‡æ¥ã€‚

vue-admin-templateæºç ç›®å½•ç»“æ„:

```
|-dist ç”Ÿäº§ç¯å¢ƒæ‰“åŒ…ç”Ÿæˆçš„æ‰“åŒ…é¡¹ç›®
|-mock äº§ç”Ÿæ¨¡æ‹Ÿæ•°æ®ï¼Œæ¨¡æ‹Ÿæ•°æ®åº“
|-public åŒ…å«ä¼šè¢«è‡ªåŠ¨æ‰“åŒ…åˆ°é¡¹ç›®æ ¹è·¯å¾„çš„æ–‡ä»¶å¤¹
	|-index.html å”¯ä¸€çš„é¡µé¢
|-src
	|-api åŒ…å«æ¥å£è¯·æ±‚å‡½æ•°æ¨¡å—
		|-table.js  è¡¨æ ¼åˆ—è¡¨mockæ•°æ®æ¥å£çš„è¯·æ±‚å‡½æ•°
		|-user.js  ç”¨æˆ·ç™»é™†ç›¸å…³mockæ•°æ®æ¥å£çš„è¯·æ±‚å‡½æ•°
	|-assets ç»„ä»¶ä¸­éœ€è¦ä½¿ç”¨çš„å…¬ç”¨èµ„æº
		|-404_images 404é¡µé¢çš„å›¾ç‰‡
	|-components éè·¯ç”±ç»„ä»¶
		|-SvgIcon svgå›¾æ ‡ç»„ä»¶
		|-Breadcrumb é¢åŒ…å±‘ç»„ä»¶(å¤´éƒ¨æ°´å¹³æ–¹å‘çš„å±‚çº§ç»„ä»¶)
		|-Hamburger ç”¨æ¥ç‚¹å‡»åˆ‡æ¢å·¦ä¾§èœå•å¯¼èˆªçš„å›¾æ ‡ç»„ä»¶
	|-icons
		|-svg åŒ…å«ä¸€äº›svgå›¾ç‰‡æ–‡ä»¶
		|-index.js å…¨å±€æ³¨å†ŒSvgIconç»„ä»¶,åŠ è½½æ‰€æœ‰svgå›¾ç‰‡å¹¶æš´éœ²æ‰€æœ‰svgæ–‡ä»¶åçš„æ•°ç»„
	|-layout
		|-components ç»„æˆæ•´ä½“å¸ƒå±€çš„ä¸€äº›å­ç»„ä»¶
		|-mixin ç»„ä»¶ä¸­å¯å¤ç”¨çš„ä»£ç 
		|-index.vue åå°ç®¡ç†çš„æ•´ä½“ç•Œé¢å¸ƒå±€ç»„ä»¶
	|-router
		|-index.js è·¯ç”±å™¨
	|-store
		|-modules
			|-app.js ç®¡ç†åº”ç”¨ç›¸å…³æ•°æ®
			|-settings.js ç®¡ç†è®¾ç½®ç›¸å…³æ•°æ®
			|-user.js ç®¡ç†åå°ç™»é™†ç”¨æˆ·ç›¸å…³æ•°æ®
		|-getters.js æä¾›å­æ¨¡å—ç›¸å…³æ•°æ®çš„gettersè®¡ç®—å±æ€§
		|-index.js vuexçš„store
	|-styles
		|-xxx.scss é¡¹ç›®ç»„ä»¶éœ€è¦ä½¿ç”¨çš„ä¸€äº›æ ·å¼(ä½¿ç”¨scss)
	|-utils ä¸€äº›å·¥å…·å‡½æ•°
		|-auth.js æ“ä½œç™»é™†ç”¨æˆ·çš„token cookie
		|-get-page-title.js å¾—åˆ°è¦æ˜¾ç¤ºçš„ç½‘é¡µtitle
		|-request.js axiosäºŒæ¬¡å°è£…çš„æ¨¡å—
		|-validate.js æ£€éªŒç›¸å…³å·¥å…·å‡½æ•°
		|-index.js æ—¥æœŸå’Œè¯·æ±‚å‚æ•°å¤„ç†ç›¸å…³å·¥å…·å‡½æ•°
	|-views è·¯ç”±ç»„ä»¶æ–‡ä»¶å¤¹
		|-dashboard é¦–é¡µ
		|-login ç™»é™†
	|-App.vue åº”ç”¨æ ¹ç»„ä»¶
	|-main.js å…¥å£js
	|-permission.js ä½¿ç”¨å…¨å±€å®ˆå«å®ç°è·¯ç”±æƒé™æ§åˆ¶çš„æ¨¡å—
	|-settings.js åŒ…å«åº”ç”¨è®¾ç½®ä¿¡æ¯çš„æ¨¡å—
|-tests  æµ‹è¯•æ–‡ä»¶ç›®å½•
|-.env.development æŒ‡å®šäº†å¼€å‘ç¯å¢ƒçš„ä»£ç†æœåŠ¡å™¨å‰ç¼€è·¯å¾„
|-.env.production æŒ‡å®šäº†ç”Ÿäº§ç¯å¢ƒçš„ä»£ç†æœåŠ¡å™¨å‰ç¼€è·¯å¾„
|-.eslintignore eslintçš„å¿½ç•¥é…ç½®
|-.eslintrc.js eslintçš„æ£€æŸ¥é…ç½®
|-.gitignore gitçš„å¿½ç•¥é…ç½®
|-.npmrc æŒ‡å®šnpmçš„æ·˜å®é•œåƒå’Œsassçš„ä¸‹è½½åœ°å€
|-babel.config.js babelçš„é…ç½®
|-jsconfig.json ç”¨äºvscodeå¼•å…¥è·¯å¾„æç¤ºçš„é…ç½®
|-package.json å½“å‰é¡¹ç›®åŒ…ä¿¡æ¯
|-package-lock.json å½“å‰é¡¹ç›®ä¾èµ–çš„ç¬¬ä¸‰æ–¹åŒ…çš„ç²¾ç¡®ä¿¡æ¯
|-vue.config.js webpackç›¸å…³é…ç½®(å¦‚: ä»£ç†æœåŠ¡å™¨)
```



### æ­å»ºé¡¹ç›®å‰ç«¯ç¯å¢ƒ

1. ç›´æ¥ä¸‹è½½vue-admin-templateï¼Œä¿®æ”¹æ–‡ä»¶åç„¶åæ‹·è´åˆ°è‡ªå·±é¡¹ç›®ä¸­
2. `npm install`
3. å¯åŠ¨é¡¹ç›®`npm run dev`



##### æ”¹é€ æ¡†æ¶ç™»å½•åŠŸèƒ½

1. æŠŠ`vue.config.js`ä¸­çš„

```vue
before: require('./mock/mock-server.js')
```

æ”¹æˆï¼š

```javascript
proxy: {
  '/dev-api': { // åŒ¹é…æ‰€æœ‰ä»¥ '/dev-api'å¼€å¤´çš„è¯·æ±‚è·¯å¾„
    target: 'http://localhost:8800',
      changeOrigin: true, // æ”¯æŒè·¨åŸŸ
        pathRewrite: { // é‡å†™è·¯å¾„: å»æ‰è·¯å¾„ä¸­å¼€å¤´çš„'/dev-api'
          '^/dev-api': ''
        }
  }
}
```



![](images/image-20230328174851454.png)

è·¨åŸŸé—®é¢˜æ˜¯æµè§ˆå™¨å¯¹ajaxè¯·æ±‚çš„ä¸€ç§é™åˆ¶ã€‚

2. ä¿®æ”¹`src/utils/request.js`æ–‡ä»¶

`src/utils/request.js`ä¸­å¯¹axiosåšäº†å°è£…ï¼Œæœ‰requestå’Œresponseçš„æ‹¦æˆªå™¨ï¼ˆæ¯ä¸€æ¬¡è¯·æ±‚å’Œå›å¤æ—¶éƒ½è¦å…ˆæ‰§è¡Œè¿™é‡Œçš„ä»£ç ï¼‰ã€‚

æŠŠè¯·æ±‚çŠ¶æ€ç ç»™æˆå’Œåç«¯ä¸€æ ·çš„200ã€‚

3. `src/api/user.js`ä¿®æ”¹ç™»å½•ç»“æ„è·¯å¾„å’Œæäº¤æ–¹å¼ï¼ˆä¸åç«¯ä¸€è‡´ï¼‰ã€‚



é€€å‡ºå¯ä»¥åç«¯å†™ä¸€ä¸ªæ¥å£ï¼Œä¹Ÿå¯æ˜¯å‰ç«¯ç›´æ¥æ¸…ç©ºcookieå³å¯ï¼ˆ`src/store/modules/user.js`ï¼‰ï¼š

```javascript
  // user logout é€€å‡ºæš‚æ—¶ä¸è°ƒç”¨åç«¯æ¥å£ï¼Œç›´æ¥å‰ç«¯æ¸…ç©ºcookieå³å¯ï¼Œ
  logout({ commit, state }) {
    return new Promise((resolve, reject) => {
      // logout(state.token).then(() => {
        removeToken() // must remove  token  first
        resetRouter()
        commit('RESET_STATE')
        resolve()
      // }).catch(error => {
      //   reject(error)
      // })
    })
  },
```



## è§’è‰²ç®¡ç†å‰ç«¯



### è§’è‰²åˆ—è¡¨

1. æ·»åŠ è§’è‰²ç®¡ç†è·¯ç”± `router/index.js`



2. åˆ›å»ºè·¯ç”±å¯¹åº”é¡µé¢ `system/sysRole/list.vue`





3. åœ¨apiç›®å½•åˆ›å»ºjsæ–‡ä»¶ï¼Œå®šä¹‰è§’è‰²ç®¡ç†æ¥å£ `src/api/system/sysRole.js`





4. åœ¨å…·ä½“åŠŸèƒ½é¡µé¢è°ƒç”¨apiå®šä¹‰çš„æ–¹æ³•è·å–æ¥å£è¿”å›æ•°æ®(åˆå§‹åŒ–vueç»„ä»¶)

src/views/system/sysRole/list.vue

```vue
<template>
    <div class="app-container">
        è§’è‰²åˆ—è¡¨
    </div>
</template>

<script>
import api from '@/api/system/sysRole'

export default {
    data() {
        return {

        }
    },
    created() {
        this.fetchData()
    },
    methods: {
        fetchData() {

        }
    }
}
</script>
```





5. æŠŠæ¥å£è¿”å›æ•°æ®è¿›è¡Œå¤„ç†ï¼Œä½¿ç”¨Element-uiæ˜¾ç¤º

å®šä¹‰data

```js
  // å®šä¹‰æ•°æ®æ¨¡å‹
  data() {
    return {
      listLoading:true, // æ•°æ®æ˜¯å¦æ­£åœ¨åŠ è½½
      list: [], // è§’è‰²åˆ—è¡¨
      total: 0, // æ€»è®°å½•æ•°
      page: 1, // é¡µç 
      limit: 2, // æ¯é¡µè®°å½•æ•°
      searchObj: {}, // æŸ¥è¯¢æ¡ä»¶
    }
  },
```

å®šä¹‰methods

```js
 methods: {
    fetchData(pageNum=1) {
       this.page = pageNum
      // è°ƒç”¨api
      api.getPageList(this.page, this.limit, this.searchObj).then(response => {
        debugger
        this.listLoading = false
        this.list = response.data.records
        this.total = response.data.total
      })
    },
  }
```

è¡¨æ ¼æ¸²æŸ“

```vue
<div class="app-container">
    <!-- è¡¨æ ¼ -->
    <el-table
      v-loading="listLoading"
      :data="list"
      stripe
      border
      style="width: 100%;margin-top: 10px;">

      <el-table-column
        label="åºå·"
        width="70"
        align="center">
        <template slot-scope="scope">
          {{ (page - 1) * limit + scope.$index + 1 }}
        </template>
      </el-table-column>

      <el-table-column prop="roleName" label="è§’è‰²åç§°" />
      <el-table-column prop="roleCode" label="è§’è‰²ç¼–ç " />
      <el-table-column prop="createTime" label="åˆ›å»ºæ—¶é—´" width="160"/>
      <el-table-column label="æ“ä½œ" width="200" align="center">
        <template slot-scope="scope">
          <el-button type="primary" icon="el-icon-edit" size="mini" @click="edit(scope.row.id)" title="ä¿®æ”¹"/>
          <el-button type="danger" icon="el-icon-delete" size="mini" @click="removeDataById(scope.row.id)" title="åˆ é™¤"/>
        </template>
      </el-table-column>
    </el-table>
  </div>
```

åˆ†é¡µç»„ä»¶

```vue
  <!-- åˆ†é¡µç»„ä»¶ -->
  <el-pagination
    :current-page="page"
    :total="total"
    :page-size="limit"
    style="padding: 30px 0; text-align: center;"
    layout="total, prev, pager, next, jumper"
    @current-change="fetchData"
  />
```

é¡¶éƒ¨æŸ¥è¯¢è¡¨å•

```vue
<!--æŸ¥è¯¢è¡¨å•-->
<div class="search-div">
      <el-form label-width="70px" size="small">
        <el-row>
          <el-col :span="24">
            <el-form-item label="è§’è‰²åç§°">
              <el-input style="width: 100%" v-model="searchObj.roleName" placeholder="è§’è‰²åç§°"></el-input>
            </el-form-item>
          </el-col>
        </el-row>
        <el-row style="display:flex">
          <el-button type="primary" icon="el-icon-search" size="mini"  @click="fetchData()">æœç´¢</el-button>
          <el-button icon="el-icon-refresh" size="mini" @click="resetData">é‡ç½®</el-button>
        </el-row>
      </el-form>
    </div>
```

**é‡ç½®è¡¨å•æ–¹æ³•**

```js
// é‡ç½®è¡¨å•
resetData() {
    console.log('é‡ç½®æŸ¥è¯¢è¡¨å•')
    this.searchObj = {}
    this.fetchData()
}
```

### 



### è§’è‰²åˆ é™¤



> p50ï¼Œ
>
> JavaScript èƒ½è¡¨ç¤ºå¹¶è¿›è¡Œç²¾ç¡®ç®—æœ¯è¿ç®—çš„æ•´æ•°èŒƒå›´ä¸ºï¼š**æ­£è´Ÿ2 çš„53 æ¬¡æ–¹ï¼Œä¹Ÿå³ä»æœ€å°å€¼-9007199254740992 åˆ°æœ€å¤§å€¼+9007199254740992 ä¹‹é—´çš„èŒƒå›´**ã€‚è¿™æ˜¯16ä½çš„ã€‚
>
> è€Œåç«¯mpè‡ªåŠ¨ç”Ÿæˆçš„idæ˜¯19ä½çš„ï¼ˆ2çš„63æ¬¡æ–¹ï¼‰

### è§’è‰²æ·»åŠ 



### è§’è‰²ä¿®æ”¹ä¸æ•°æ®å›æ˜¾



### æ‰¹é‡åˆ é™¤





## ç”¨æˆ·ç®¡ç†

### CRUD



### ç”¨æˆ·ç®¡ç†å‰ç«¯å®ç°



### æ›´æ”¹ç”¨æˆ·çŠ¶æ€



### å‰ç«¯å®ç°



### ç»™ç”¨æˆ·åˆ†é…è§’è‰²



ğŸå¯ä»¥è¿è¡Œï¼Œä½†çº¢çº¿ 

```
v-model="scope.row.status === 1"
```



## èœå•ç®¡ç†

### èœå•ç®¡ç†éœ€æ±‚

ä¸åŒè§’è‰²çš„ç”¨æˆ·ç™»å½•åå°ç®¡ç†ç³»ç»Ÿæ‹¥æœ‰ä¸åŒçš„èœå•æƒé™ä¸åŠŸèƒ½æƒé™ã€‚æˆ‘ä»¬å‰ç«¯æ˜¯åŸºäºï¼švue-admin-templateè¿™ä¸ªæ¨¡å—å¼€å‘çš„ï¼Œå› æ­¤æˆ‘ä»¬èœå•è¡¨è®¾è®¡ä¹Ÿå¿…é¡»åŸºäºå‰ç«¯æ¨¡æ¿è¿›è¡Œè®¾è®¡ã€‚

å‰ç«¯æ¡†æ¶vue-admin-templateèœå•å…¶å®å°±æ˜¯æˆ‘ä»¬é…ç½®çš„è·¯ç”±ï¼š

```js
{
  path: '/system',
  component: Layout,
  meta: {
    title: 'ç³»ç»Ÿç®¡ç†',
    icon: 'el-icon-s-tools'
  },
  alwaysShow: true,
  children: [
    {
      name: 'sysUser',
      path: 'sysUser',
      component: () => import('@/views/system/sysUser/list'),
      meta: {
        title: 'ç”¨æˆ·ç®¡ç†',
        icon: 'el-icon-s-custom'
      },
    },
    {
      path: 'sysRole',
      component: () => import('@/views/system/sysRole/list'),
      meta: {
        title: 'è§’è‰²ç®¡ç†',
        icon: 'el-icon-s-help'
      },
    },
    {
      name: 'sysMenu',
      path: 'sysMenu',
      component: () => import('@/views/system/sysMenu/list'),
      meta: {
        title: 'èœå•ç®¡ç†',
        icon: 'el-icon-s-unfold'
      },
    },
    {
      path: 'assignAuth',
      component: () => import('@/views/system/sysRole/assignAuth'),
      meta: {
        activeMenu: '/system/sysRole',
        title: 'è§’è‰²æˆæƒ'
      },
      hidden: true,
    }
  ]
}
```

å› æ­¤ï¼Œèœå•è¡¨çš„è®¾è®¡å¿…é¡»æ»¡è¶³è·¯ç”±é…ç½®çš„å¿…è¦ä¿¡æ¯ã€‚

### èœå•è¡¨è®¾è®¡

```mysql
CREATE TABLE `sys_menu` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ç¼–å·',
  `parent_id` bigint NOT NULL DEFAULT '0' COMMENT 'æ‰€å±ä¸Šçº§',
  `name` varchar(20) NOT NULL DEFAULT '' COMMENT 'åç§°',
  `type` tinyint NOT NULL DEFAULT '0' COMMENT 'ç±»å‹(0:ç›®å½•,1:èœå•,2:æŒ‰é’®)',
  `path` varchar(100) DEFAULT NULL COMMENT 'è·¯ç”±åœ°å€',
  `component` varchar(100) DEFAULT NULL COMMENT 'ç»„ä»¶è·¯å¾„',
  `perms` varchar(100) DEFAULT NULL COMMENT 'æƒé™æ ‡è¯†',
  `icon` varchar(100) DEFAULT NULL COMMENT 'å›¾æ ‡',
  `sort_value` int DEFAULT NULL COMMENT 'æ’åº',
  `status` tinyint DEFAULT NULL COMMENT 'çŠ¶æ€(0:ç¦æ­¢,1:æ­£å¸¸)',
  `create_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  `is_deleted` tinyint NOT NULL DEFAULT '0' COMMENT 'åˆ é™¤æ ‡è®°ï¼ˆ0:å¯ç”¨ 1:å·²åˆ é™¤ï¼‰',
  PRIMARY KEY (`id`),
  KEY `idx_parent_id` (`parent_id`)
) ENGINE=InnoDB AUTO_INCREMENT=35 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci COMMENT='èœå•è¡¨';
```

é‡ç‚¹å­—æ®µè¯´æ˜ï¼š

â€‹	typeï¼šèœå•ç±»å‹ï¼Œåˆ†ä¸ºï¼šç›®å½•ã€èœå•ä¸æŒ‰é’®

â€‹				ç›®å½•ï¼šä¸€ä¸ªåˆ†ç±»ï¼ˆå¯ç†è§£ä¸ºä¸€çº§èœå•ï¼‰ã€ç›®å½•ä¸‹çº§èŠ‚ç‚¹å¯ä»¥ä¸ºç›®å½•ä¸èœå•

â€‹				èœå•ï¼šä¸€ä¸ªå…·ä½“é¡µé¢ï¼Œèœå•çš„ä¸‹çº§èŠ‚ç‚¹åªèƒ½æ˜¯æŒ‰é’®

â€‹				æŒ‰é’®ï¼šé¡µé¢ä¸Šçš„åŠŸèƒ½

â€‹	pathï¼šå¯¹åº”è·¯ç”±é‡Œé¢çš„è·¯ç”±åœ°å€path

â€‹	componentï¼šå¯¹åº”è·¯ç”±é‡Œé¢çš„ç»„ä»¶component

â€‹	permsï¼šå¯¹åº”èœå•çš„åŠŸèƒ½æƒé™æ ‡è¯†

â€‹	icomï¼šå¯¹åº”è·¯ç”±çš„èœå•å›¾æ ‡

### CRUD



### èœå•ç®¡ç†å‰ç«¯



### ç»™è§’è‰²åˆ†é…æƒé™

1ã€è¿›å…¥åˆ†é…é¡µé¢ï¼šè·å–å…¨éƒ¨èœå•åŠæŒ‰é’®ï¼Œé€‰ä¸­å·²é€‰å¤é€‰æ¡†ï¼Œè¿›è¡Œé¡µé¢å±•ç¤º

2ã€ä¿å­˜åˆ†é…æƒé™ï¼šåˆ é™¤ä¹‹å‰åˆ†é…çš„æƒé™å’Œä¿å­˜ç°åœ¨åˆ†é…çš„æƒé™



## æƒé™ç®¡ç†

### 1 æƒé™ç®¡ç†ä»‹ç»

**é¡µé¢æƒé™(èœå•çº§)ã€æ“ä½œæƒé™ï¼ˆæŒ‰é’®çº§ï¼‰ã€æ•°æ®æƒé™**ã€‚



#### æƒé™ç®¡ç†è®¾è®¡æ€è·¯



### 2 JWT



### 3 ç”¨æˆ·ç™»å½•



### 4 è·å–ç”¨æˆ·ä¿¡æ¯



## Spring Securityä»‹ç»





## å…¶ä»–åŠŸèƒ½

å…¶ä»–åŠŸèƒ½ï¼šéƒ¨é—¨ç®¡ç†ã€å²—ä½ç®¡ç†ã€æ—¥å¿—ç®¡ç†ï¼ˆç™»å½•æ—¥å¿—ã€æ“ä½œæ—¥å¿—ï¼‰



### éƒ¨é—¨ç®¡ç†



### å²—ä½ç®¡ç†



### ç™»å½•æ—¥å¿—



### æ“ä½œæ—¥å¿—





```
{
  "description": "æµ‹è¯•",
  "id": 0,
  "name": "jack",
  "password": "123456",
  "phone": "15121546639",
  "username": "jack"
}
```

